var documenterSearchIndex = {"docs":
[{"location":"advanced_usage/#Advanced-Usage","page":"Advanced Usage","title":"Advanced Usage","text":"This guide covers advanced features and configuration options for Magika.jl.","category":"section"},{"location":"advanced_usage/#Symbolic-Link-Handling","page":"Advanced Usage","title":"Symbolic Link Handling","text":"By default, Magika follows symbolic links to identify the target file type. You can change this behavior:\n\n# Create a detector that doesn't follow symbolic links\nm = MagikaConfig(no_dereference=true)\n\n# This will identify as a symlink rather than following to the target\nresult = identify_path(m, \"my_symlink\")","category":"section"},{"location":"advanced_usage/#Batch-Processing","page":"Advanced Usage","title":"Batch Processing","text":"Magika is optimized for processing multiple files efficiently:\n\nfunction batch_identify(paths::Vector{String})\n    m = MagikaConfig()\n    results = Dict{String, MagikaResult}()\n    \n    for path in paths\n        results[path] = identify_path(m, path)\n    end\n    \n    return results\nend\n\n# Example usage\nfiles = [\"file1.txt\", \"image.jpg\", \"document.pdf\"]\nresults = batch_identify(files)\n\nfor (path, result) in results\n    if is_ok(result)\n        println(\"$path: $(result.prediction.output.description)\")\n    else\n        println(\"$path: Error - $(result.status)\")\n    end\nend","category":"section"},{"location":"advanced_usage/#Custom-Confidence-Thresholds","page":"Advanced Usage","title":"Custom Confidence Thresholds","text":"While Magika uses built-in thresholds for each content type, you can implement custom filtering:\n\nfunction identify_with_custom_threshold(m::MagikaConfig, path::String, min_score::Float32=0.8f0)\n    result = identify_path(m, path)\n    \n    if is_ok(result) && result.prediction.score >= min_score\n        return result\n    else\n        # Return a generic result for low confidence predictions\n        generic_result = MagikaResult(\n            path,\n            OK,\n            MagikaPrediction(\n                m._cts_infos[UNDEFINED],\n                m._cts_infos[result.prediction.output.is_text ? TXT : UNKNOWN],\n                result.prediction.score,\n                LOW_CONFIDENCE\n            )\n        )\n        return generic_result\n    end\nend","category":"section"},{"location":"advanced_usage/#Integration-with-File-Processing-Pipelines","page":"Advanced Usage","title":"Integration with File Processing Pipelines","text":"Here's an example of integrating Magika with a file processing pipeline:\n\nfunction process_file_by_type(path::String)\n    m = MagikaConfig()\n    result = identify_path(m, path)\n    \n    if !is_ok(result)\n        error(\"Could not identify file type: $(result.status)\")\n    end\n    \n    content_type = result.prediction.output.label\n    \n    try\n        # Process based on detected content type\n        if content_type == ContentTypeLabel(\"json\")\n            println(\"Processing as JSON file\")\n            data = JSON3.read(read(path, String))\n            # Process JSON data...\n            \n        elseif content_type == ContentTypeLabel(\"csv\")\n            println(\"Processing as CSV file\")\n            df = CSV.read(path, DataFrame)\n            # Process CSV data...\n            \n        elseif content_type == ContentTypeLabel(\"png\") || content_type == ContentTypeLabel(\"jpeg\")\n            println(\"Processing as image file\")\n            img = load(path)\n            # Process image data...\n            \n        else\n            println(\"Generic processing for $(result.prediction.output.description)\")\n            content = read(path, String)\n            # Generic processing...\n        end\n        \n    catch e\n        # Fallback if content type detection was incorrect\n        println(\"Error during processing: $e\")\n        println(\"Attempting generic processing...\")\n        content = read(path, String)\n        # Generic processing fallback...\n    end\nend","category":"section"},{"location":"advanced_usage/#Performance-Optimization","page":"Advanced Usage","title":"Performance Optimization","text":"For high-throughput applications, reuse the same MagikaConfig instance:\n\nfunction high_throughput_processor(file_paths::Vector{String})\n    # Create ONE detector instance for all files\n    m = MagikaConfig(prediction_mode=MEDIUM_CONFIDENCE)\n    \n    results = []\n    for path in file_paths\n        push!(results, identify_path(m, path))\n    end\n    \n    return results\nend","category":"section"},{"location":"advanced_usage/#Handling-Edge-Cases","page":"Advanced Usage","title":"Handling Edge Cases","text":"function robust_file_identifier(path::String)\n    m = MagikaConfig()\n    \n    # Handle non-existent files\n    if !ispath(path)\n        return MagikaResult(path, FILE_NOT_FOUND_ERROR)\n    end\n    \n    # Handle permission issues with try-catch\n    try\n        return identify_path(m, path)\n    catch e\n        if isa(e, SystemError) && e.errnum == 13\n            return MagikaResult(path, PERMISSION_ERROR)\n        end\n        rethrow(e)\n    end\nend\n\nThese advanced patterns demonstrate how to use Magika.jl in production environments with robust error handling and performance considerations.","category":"section"},{"location":"api/#API-Reference","page":"API Reference","title":"API Reference","text":"","category":"section"},{"location":"api/#Magika.ContentTypeInfo","page":"API Reference","title":"Magika.ContentTypeInfo","text":"struct ContentTypeInfo\n\nMetadata container for a specific content type that Magika can identify.\n\nFields\n\nlabel::ContentTypeLabel: Enum identifier for the content type (e.g., python, jpeg)\nmime_type::String: Standard MIME type associated with this content type (e.g., \"text/x-python\", \"image/jpeg\")\ngroup::String: Category group of the content type (e.g., \"code\", \"document\", \"image\", \"audio\")\ndescription::String: Human-readable description of the content type (e.g., \"Python source\", \"JPEG image\")\nextensions::Vector{String}: Common file extensions associated with this content type (e.g., [\"py\", \"pyi\"])\nis_text::Bool: Flag indicating whether this content type is text-based (true) or binary (false)\n\nNotes\n\nThis struct is automatically populated from Google Magika's content type knowledge base during initialization. Users typically access this information through prediction results rather than constructing it directly.\n\nEach content type in Magika's detection system has a corresponding ContentTypeInfo that provides comprehensive metadata about that file format.\n\nExample\n\nm = MagikaConfig()\nresult = identify_path(m, \"script.py\")\n\nif is_ok(result)\n    info = result.prediction.output\n    println(\"File format: $(info.description)\")\n    println(\"MIME type: $(info.mime_type)\")\n    println(\"Common extensions: $(join(info.extensions, \", \"))\")\n    println(\"Category: $(info.group)\")\n    println(\"Text-based: $(info.is_text)\")\nend\n\n\n\n\n\n","category":"type"},{"location":"api/#Magika.ContentTypeLabel","page":"API Reference","title":"Magika.ContentTypeLabel","text":"@enum ContentTypeLabel\n\nEnumeration of all supported content type labels that Magika can detect. Contains over 300 labels for different file formats, from common types like PNG, PDF to specialized formats like BRAINFUCK, VIMRC.\n\nExamples\n\n# Get the string representation of a content type\nprintln(string(ContentTypeLabel(\"png\")))  # \"png\"\n\n# Convert from string to enum\nlabel = ContentTypeLabel(\"jpeg\")\n\nNotes\n\nEach label corresponds to a specific file format with associated metadata including MIME type, description, and file extensions.\n\n\n\n\n\n","category":"type"},{"location":"api/#Magika.MagikaConfig","page":"API Reference","title":"Magika.MagikaConfig","text":"MagikaConfig(; prediction_mode=HIGH_CONFIDENCE, no_dereference=false)\n\nCreate a Magika configuration object for file type detection.\n\nArguments\n\nprediction_mode::PredictionMode: Confidence threshold mode for predictions.\nHIGH_CONFIDENCE: Only returns predictions with high confidence specific to each content type\nMEDIUM_CONFIDENCE: Balanced approach using a medium confidence threshold\nBEST_GUESS: Always returns the most likely prediction regardless of confidence\nno_dereference::Bool: When true, symbolic links are identified as links rather than their targets\n\nExamples\n\n# Create a detector with default settings\nm = MagikaConfig()\n\n# Create a detector that doesn't follow symlinks and uses medium confidence\nm = MagikaConfig(prediction_mode=MEDIUM_CONFIDENCE, no_dereference=true)\n\n\n\n\n\n","category":"type"},{"location":"api/#Magika.MagikaPrediction","page":"API Reference","title":"Magika.MagikaPrediction","text":"struct MagikaPrediction\n\nContainer for the prediction results from Magika's deep learning model.\n\nFields\n\ndl::ContentTypeInfo: The raw prediction directly from the deep learning model, before applying confidence thresholds or overwrite rules\noutput::ContentTypeInfo: The final prediction after applying confidence thresholds and overwrite rules\nscore::Float32: Confidence score between 0.0 and 1.0 indicating how certain the model is about its prediction\noverwrite_reason::OverwriteReason: Enum explaining why the final output might differ from the raw model prediction:\nNONE: No overwrite occurred, output matches raw prediction\nLOW_CONFIDENCE: Prediction was downgraded due to low confidence score\nOVERWRITE_MAP: Prediction was replaced according to predefined mapping rules\n\nNotes\n\nThe distinction between dl (deep learning raw output) and output (final decision) is crucial for understanding Magika's behavior. In some cases, especially with low-confidence predictions, Magika will \"downgrade\" specific predictions to more generic types (e.g., from a specific programming language to generic \"text\") for safety and reliability.\n\nThe confidence score should be considered when making security-critical decisions about file handling. Higher scores indicate more reliable predictions.\n\nExample\n\nm = MagikaConfig()\nresult = identify_path(m, \"unknown_file\")\n\nif is_ok(result)\n    pred = result.prediction\n    \n    # Access final prediction\n    println(\"Detected as: $(pred.output.description)\")\n    println(\"Confidence: $(pred.score)\")\n    \n    # Check if prediction was modified from raw model output\n    if pred.overwrite_reason != NONE\n        println(\"Original prediction ($(pred.dl.description)) was modified because: $(pred.overwrite_reason)\")\n    end\n    \n    # Use confidence score to make decisions\n    if pred.score > 0.9\n        println(\"High confidence prediction - safe to process automatically\")\n    elseif pred.overwrite_reason == LOW_CONFIDENCE\n        println(\"Low confidence prediction - consider human verification\")\n    end\nend\n\n\n\n\n\n","category":"type"},{"location":"api/#Magika.MagikaResult","page":"API Reference","title":"Magika.MagikaResult","text":"struct MagikaResult\n\nContainer for file identification results.\n\nFields\n\npath::String: Path or identifier of the analyzed content\nstatus::Status: Status of the identification operation (OK, FILE_NOT_FOUND_ERROR, etc.)\nprediction::Union{MagikaPrediction, Nothing}: Prediction details when status is OK\n\nAccessors\n\nUse is_ok(result) to check if identification was successful\nWhen successful, access prediction details via result.prediction\n\n\n\n\n\n","category":"type"},{"location":"api/#Magika.ModelConfig","page":"API Reference","title":"Magika.ModelConfig","text":"struct ModelConfig\n\nConfiguration parameters for the Magika deep learning model. This struct contains all the hyperparameters and settings needed for feature extraction and prediction.\n\nFields\n\nbeg_size::Int: Number of bytes to extract from the beginning of a file for feature extraction.\nmid_size::Int: Number of bytes to extract from the middle of a file (currently not used in inference).\nend_size::Int: Number of bytes to extract from the end of a file for feature extraction.\nuse_inputs_at_offsets::Bool: Flag indicating whether to use content at specific byte offsets (reserved for future use).\nmedium_confidence_threshold::Float32: Default confidence threshold used in MEDIUM_CONFIDENCE prediction mode.\nmin_file_size_for_dl::Int: Minimum file size (in bytes) required to use the deep learning model. Smaller files use simpler detection methods.\npadding_token::Int: Byte value used for padding when file content is shorter than required feature size.\nblock_size::Int: Size of data blocks read from files during feature extraction.\ntarget_labels_space::Vector{ContentTypeLabel}: Vector of all possible content type labels the model can predict.\nthresholds::Dict{ContentTypeLabel, Float32}: Content type-specific confidence thresholds used in HIGH_CONFIDENCE mode.\noverwrite_map::Dict{ContentTypeLabel, ContentTypeLabel}: Mapping of content types to be automatically overwritten with alternative labels (e.g., for security reasons).\n\nNotes\n\nThis configuration is automatically loaded from the model's config file when a MagikaConfig is initialized. Users typically don't need to construct this struct directly.\n\nThe configuration values are optimized during model training to achieve high accuracy while maintaining fast inference times. The model only analyzes the beginning and end portions of files, making detection time nearly constant regardless of file size.\n\nExample\n\n# This struct is typically loaded automatically\ncfg = m._model_config  # where m is a MagikaConfig instance\n\nprintln(\"Minimum file size for DL: $(cfg.min_file_size_for_dl) bytes\")\nprintln(\"Medium confidence threshold: $(cfg.medium_confidence_threshold)\")\n\n\n\n\n\n","category":"type"},{"location":"api/#Magika.OverwriteReason","page":"API Reference","title":"Magika.OverwriteReason","text":"@enum OverwriteReason NONE LOW_CONFIDENCE OVERWRITE_MAP\n\nEnumeration of reasons why a model prediction might be overwritten with a different label.\n\nValues\n\nNONE: No overwrite occurred, using the raw model prediction\nLOW_CONFIDENCE: Prediction was downgraded due to low confidence score\nOVERWRITE_MAP: Prediction was replaced according to predefined mapping rules\n\nNotes\n\nThis information is available in result.prediction.overwrite_reason to understand why a prediction might differ from the model's raw output.\n\n\n\n\n\n","category":"type"},{"location":"api/#Magika.PredictionMode","page":"API Reference","title":"Magika.PredictionMode","text":"@enum PredictionMode HIGH_CONFIDENCE MEDIUM_CONFIDENCE BEST_GUESS\n\nEnumeration of prediction confidence modes that control how strictly Magika applies confidence thresholds.\n\nValues\n\nHIGH_CONFIDENCE: Most conservative mode. Only returns predictions that meet content-type-specific high confidence thresholds.\nMEDIUM_CONFIDENCE: Balanced mode. Uses a medium confidence threshold for all content types.\nBEST_GUESS: Most permissive mode. Always returns the model's top prediction regardless of confidence score.\n\nExamples\n\n# Create a highly conservative detector\nm = MagikaConfig(prediction_mode=HIGH_CONFIDENCE)\n\n\n\n\n\n","category":"type"},{"location":"api/#Magika.Status","page":"API Reference","title":"Magika.Status","text":"@enum Status OK FILE_NOT_FOUND_ERROR PERMISSION_ERROR UNKNOWN_ERROR\n\nEnumeration of possible status codes for identification operations.\n\nValues\n\nOK: Operation completed successfully\nFILE_NOT_FOUND_ERROR: File path does not exist\nPERMISSION_ERROR: Unable to access file due to permissions\nUNKNOWN_ERROR: Other unexpected error occurred\n\n\n\n\n\n","category":"type"},{"location":"api/#Magika.identify_bytes-Tuple{MagikaConfig, Vector{UInt8}}","page":"API Reference","title":"Magika.identify_bytes","text":"identify_bytes(m::MagikaConfig, content::Vector{UInt8})::MagikaResult\n\nIdentify the content type from raw byte content.\n\nArguments\n\nm::MagikaConfig: Pre-configured Magika detector\ncontent::Vector{UInt8}: Byte array containing file content to analyze\n\nReturns\n\nA MagikaResult object containing the detection results.\n\nExamples\n\nm = MagikaConfig()\ncontent = read(\"image.png\")\nresult = identify_bytes(m, content)\nprintln(\"Content type: \", result.prediction.output.label)\n\n\n\n\n\n","category":"method"},{"location":"api/#Magika.identify_path-Tuple{MagikaConfig, String}","page":"API Reference","title":"Magika.identify_path","text":"identify_path(m::MagikaConfig, path::AbstractString)::MagikaResult\n\nIdentify the content type of a file at the given path.\n\nArguments\n\nm::MagikaConfig: Pre-configured Magika detector\npath::AbstractString: Path to the file to analyze\n\nReturns\n\nA MagikaResult object containing the detection results. Check with is_ok(result) before accessing prediction details.\n\nExamples\n\nm = MagikaConfig()\nresult = identify_path(m, \"document.pdf\")\nif is_ok(result)\n    println(\"Detected as: \", result.prediction.output.description)\n    println(\"MIME type: \", result.prediction.output.mime_type)\n    println(\"Confidence: \", result.prediction.score)\nelse\n    println(\"Error: \", result.status)\nend\n\n\n\n\n\n","category":"method"},{"location":"api/#Magika.identify_stream-Tuple{MagikaConfig, IO}","page":"API Reference","title":"Magika.identify_stream","text":"identify_stream(m::MagikaConfig, stream::IO)::MagikaResult\n\nIdentify the content type from an IO stream.\n\nArguments\n\nm::MagikaConfig: Pre-configured Magika detector\nstream::IO: IO stream to read content from (will be seeked)\n\nReturns\n\nA MagikaResult object containing the detection results.\n\nExamples\n\nm = MagikaConfig()\nopen(\"data.csv\", \"r\") do io\n    result = identify_stream(m, io)\n    println(\"File group: \", result.prediction.output.group)\nend\n\n\n\n\n\n","category":"method"},{"location":"api/#Magika.is_ok-Tuple{MagikaResult}","page":"API Reference","title":"Magika.is_ok","text":"is_ok(result::MagikaResult)::Bool\n\nCheck if a MagikaResult represents a successful identification.\n\nReturns\n\ntrue if the status is OK, false otherwise.\n\nExamples\n\nresult = identify_path(m, \"file.txt\")\nif is_ok(result)\n    # Safe to access result.prediction\n    println(\"Detected as: \", result.prediction.output.description)\nelse\n    println(\"Identification failed with status: \", result.status)\nend\n\n\n\n\n\n","category":"method"},{"location":"basic_usage/#Basic-Usage","page":"Basic Usage","title":"Basic Usage","text":"This guide covers the fundamental ways to use Magika.jl for file type detection.","category":"section"},{"location":"basic_usage/#Initialization","page":"Basic Usage","title":"Initialization","text":"First, create a Magika detector configuration:\n\nusing Magika\n\n# Create a detector with default settings (high confidence mode)\nm = MagikaConfig()","category":"section"},{"location":"basic_usage/#File-Detection-Methods","page":"Basic Usage","title":"File Detection Methods","text":"Magika.jl provides three primary methods for detecting file types:","category":"section"},{"location":"basic_usage/#1.-From-File-Path","page":"Basic Usage","title":"1. From File Path","text":"result = identify_path(m, \"document.pdf\")","category":"section"},{"location":"basic_usage/#2.-From-Byte-Content","page":"Basic Usage","title":"2. From Byte Content","text":"content = read(\"image.png\")\nresult = identify_bytes(m, content)","category":"section"},{"location":"basic_usage/#3.-From-IO-Stream","page":"Basic Usage","title":"3. From IO Stream","text":"open(\"data.csv\", \"r\") do io\n    result = identify_stream(m, io)\nend","category":"section"},{"location":"basic_usage/#Handling-Results","page":"Basic Usage","title":"Handling Results","text":"Always check if the identification was successful before accessing prediction details:\n\nif is_ok(result)\n    println(\"File type: $(result.prediction.output.description)\")\n    println(\"MIME type: $(result.prediction.output.mime_type)\")\n    println(\"Confidence score: $(result.prediction.score)\")\nelse\n    println(\"Error identifying file: $(result.status)\")\nend","category":"section"},{"location":"basic_usage/#Prediction-Modes","page":"Basic Usage","title":"Prediction Modes","text":"Magika.jl offers different confidence thresholds for predictions:\n\n# High confidence mode (default) - only returns high-confidence predictions\nm = MagikaConfig(prediction_mode=HIGH_CONFIDENCE)\n\n# Medium confidence mode - balanced approach\nm = MagikaConfig(prediction_mode=MEDIUM_CONFIDENCE)\n\n# Best guess mode - always returns a prediction\nm = MagikaConfig(prediction_mode=BEST_GUESS)","category":"section"},{"location":"basic_usage/#Example-Workflow","page":"Basic Usage","title":"Example Workflow","text":"Here's a complete example showing common usage patterns:\n\nusing Magika\n\n# Initialize detector\nm = MagikaConfig()\n\n# Identify a file\nresult = identify_path(m, \"example.py\")\n\nif is_ok(result)\n    println(\"File path: $(result.path)\")\n    println(\"Content type: $(result.prediction.output.description)\")\n    println(\"MIME type: $(result.prediction.output.mime_type)\")\n    println(\"File group: $(result.prediction.output.group)\")\n    println(\"Extensions: $(join(result.prediction.output.extensions, \\\", \\\"))\")\n    println(\"Confidence: $(result.prediction.score)\")\n    \n    # Check if this was a raw prediction or overwritten\n    if result.prediction.overwrite_reason != NONE\n        println(\"Original prediction was overwritten because: $(result.prediction.overwrite_reason)\")\n    end\nelse\n    println(\"Failed to identify file: $(result.status)\")\nend\n\nBy understanding these basic usage patterns, you can effectively integrate Magika.jl into your Julia applications for accurate file type detection.","category":"section"},{"location":"#Magika.jl","page":"Home","title":"Magika.jl","text":"AI-powered file type detection library for Julia","category":"section"},{"location":"#Overview","page":"Home","title":"Overview","text":"Magika.jl is a Julia implementation of Google's Magika, a state-of-the-art file type detection tool that leverages deep learning to accurately identify file content types. This package brings the powerful file identification capabilities of Magika to the Julia ecosystem.\n\nMagika.jl can identify hundreds of different file types with high accuracy, even when file extensions are missing or incorrect. It uses a pre-trained deep learning model (only a few MBs in size) that can process files in milliseconds on standard hardware.\n\nThis package was developed with assistance from multiple AI tools to accelerate implementation and ensure compatibility with the original Magika project.","category":"section"},{"location":"#Installation","page":"Home","title":"Installation","text":"using Pkg\nPkg.add(\"Magika\")","category":"section"},{"location":"#Quick-Start","page":"Home","title":"Quick Start","text":"using Magika\n\n# Initialize the detector with default settings\nm = MagikaConfig()\n\n# Identify a file by path\nresult = identify_path(m, \"path/to/file.txt\")\nprintln(\"File type: $(result.prediction.output.description)\")\n\n# Identify bytes directly\ncontent = read(\"path/to/file.txt\")\nresult = identify_bytes(m, content)\nprintln(\"MIME type: $(result.prediction.output.mime_type)\")\n\n# Identify from an IO stream\nopen(\"path/to/file.txt\", \"r\") do io\n    result = identify_stream(m, io)\n    println(\"Content label: $(result.prediction.output.label)\")\nend","category":"section"},{"location":"#Core-Functionality","page":"Home","title":"Core Functionality","text":"","category":"section"},{"location":"#Prediction-Modes","page":"Home","title":"Prediction Modes","text":"Magika supports different confidence thresholds for predictions:\n\n# Create a conservative detector (only high-confidence predictions)\nm = MagikaConfig(prediction_mode=HIGH_CONFIDENCE)\n\n# Create a balanced detector (medium confidence threshold)\nm = MagikaConfig(prediction_mode=MEDIUM_CONFIDENCE)\n\n# Create a detector that always returns a prediction\nm = MagikaConfig(prediction_mode=BEST_GUESS)","category":"section"},{"location":"#Handling-Results","page":"Home","title":"Handling Results","text":"result = identify_path(m, \"document.pdf\")\n\nif is_ok(result)\n    println(\"Status: OK\")\n    println(\"Content type: $(result.prediction.output.description)\")\n    println(\"MIME type: $(result.prediction.output.mime_type)\")\n    println(\"Confidence score: $(result.prediction.score)\")\n    println(\"File group: $(result.prediction.output.group)\")\n    println(\"Extensions: $(join(result.prediction.output.extensions, \", \"))\")\nelse\n    println(\"Error identifying file: $(result.status)\")\nend","category":"section"},{"location":"#Supported-File-Types","page":"Home","title":"Supported File Types","text":"Magika.jl can identify over 300 different file types, including:\n\nCommon document formats (PDF, DOCX, TXT)\nProgramming languages (Python, C++, JavaScript)\nImage formats (PNG, JPEG, GIF, WebP)\nAudio/Video formats (MP3, MP4, WebM)\nArchive formats (ZIP, TAR, GZIP)\nSystem files (ELF, PE binaries)\nAnd many more specialized formats","category":"section"},{"location":"#Advanced-Usage","page":"Home","title":"Advanced Usage","text":"","category":"section"},{"location":"#Symbolic-Links-Handling","page":"Home","title":"Symbolic Links Handling","text":"# Create a configuration that doesn't follow symbolic links\nm = MagikaConfig(no_dereference=true)\nresult = identify_path(m, \"symlink-to-file\")\n# Will identify as a symlink instead of the target file type","category":"section"},{"location":"understanding_results/#Understanding-Results","page":"Understanding Results","title":"Understanding Results","text":"This guide explains the structure of Magika.jl results and how to interpret them effectively.","category":"section"},{"location":"understanding_results/#Result-Structure-Overview","page":"Understanding Results","title":"Result Structure Overview","text":"A MagikaResult contains three main components:\n\nPath information: The file path or identifier that was analyzed\nStatus: Whether the identification was successful\nPrediction details (if successful): Comprehensive information about the detected content type","category":"section"},{"location":"understanding_results/#Checking-Result-Status","page":"Understanding Results","title":"Checking Result Status","text":"Always check the status before accessing prediction details:\n\nresult = identify_path(m, \"file.txt\")\n\nif is_ok(result)\n    # Safe to access prediction details\n    println(\"Detection successful!\")\nelse\n    println(\"Detection failed with status: $(result.status)\")\nend","category":"section"},{"location":"understanding_results/#Status-Types","page":"Understanding Results","title":"Status Types","text":"Magika.jl defines several status codes:\n\nOK: Detection was successful\nFILE_NOT_FOUND_ERROR: The file path doesn't exist\nPERMISSION_ERROR: Unable to access the file due to permissions\nUNKNOWN_ERROR: An unexpected error occurred","category":"section"},{"location":"understanding_results/#Prediction-Details","page":"Understanding Results","title":"Prediction Details","text":"When status is OK, the result.prediction field contains:","category":"section"},{"location":"understanding_results/#1.-Deep-Learning-Output-(dl)","page":"Understanding Results","title":"1. Deep Learning Output (dl)","text":"The raw prediction from the neural network model:\n\nlabel: The content type label (e.g., python, jpeg)\ndescription: Human-readable description (e.g., \"Python source\")\nmime_type: Standard MIME type (e.g., \"text/x-python\")\ngroup: Content category (e.g., \"code\", \"document\", \"image\")\nextensions: Common file extensions for this type\nis_text: Whether this is a text-based format","category":"section"},{"location":"understanding_results/#2.-Final-Output-(output)","page":"Understanding Results","title":"2. Final Output (output)","text":"The final content type after applying confidence thresholds and overwrite rules:\n\nSame fields as dl, but potentially modified based on confidence","category":"section"},{"location":"understanding_results/#3.-Confidence-Score","page":"Understanding Results","title":"3. Confidence Score","text":"score: A float between 0.0 and 1.0 indicating prediction confidence\nHigher scores indicate more reliable predictions","category":"section"},{"location":"understanding_results/#4.-Overwrite-Reason","page":"Understanding Results","title":"4. Overwrite Reason","text":"Explains why the final output might differ from the raw model prediction:\n\nNONE: No overwrite occurred\nLOW_CONFIDENCE: Downgraded due to low confidence score\nOVERWRITE_MAP: Changed according to predefined mapping rules","category":"section"},{"location":"understanding_results/#Example:-Complete-Result-Analysis","page":"Understanding Results","title":"Example: Complete Result Analysis","text":"function analyze_result(result::MagikaResult)\n    println(\"Path: $(result.path)\")\n    \n    if !is_ok(result)\n        println(\"Status: $(result.status)\")\n        return\n    end\n    \n    pred = result.prediction\n    \n    println(\"\\nRaw model prediction (dl):\")\n    println(\"  Label: $(pred.dl.label)\")\n    println(\"  Description: $(pred.dl.description)\")\n    println(\"  MIME type: $(pred.dl.mime_type)\")\n    println(\"  Group: $(pred.dl.group)\")\n    println(\"  Extensions: $(join(pred.dl.extensions, \\\", \\\"))\")\n    println(\"  Is text: $(pred.dl.is_text)\")\n    \n    println(\"\\nFinal output:\")\n    println(\"  Label: $(pred.output.label)\")\n    println(\"  Description: $(pred.output.description)\")\n    \n    println(\"\\nConfidence score: $(pred.score)\")\n    \n    println(\"\\nOverwrite reason: $(pred.overwrite_reason)\")\n    if pred.overwrite_reason != NONE\n        println(\"  Note: The raw prediction was modified because of low confidence\")\n        println(\"  or predefined mapping rules. Consider the confidence score\")\n        println(\"  when making decisions based on this result.\")\n    end\n    \n    # Practical interpretation\n    if pred.score > 0.95\n        println(\"\\nInterpretation: Very high confidence prediction\")\n    elseif pred.score > 0.85\n        println(\"\\nInterpretation: High confidence prediction\")\n    elseif pred.score > 0.7\n        println(\"\\nInterpretation: Medium confidence - generally reliable\")\n    else\n        println(\"\\nInterpretation: Low confidence - consider verification\")\n    end\n    \n    # Security considerations\n    if pred.overwrite_reason == LOW_CONFIDENCE && pred.output.is_text\n        println(\"\\nSecurity note: This was originally detected as binary content\")\n        println(\"but downgraded to generic text due to low confidence.\")\n        println(\"Exercise caution when processing this file.\")\n    end\nend\n\n# Usage example\nresult = identify_path(MagikaConfig(), \"unknown_file\")\nanalyze_result(result)","category":"section"},{"location":"understanding_results/#Common-Result-Patterns","page":"Understanding Results","title":"Common Result Patterns","text":"","category":"section"},{"location":"understanding_results/#1.-High-Confidence-Detection","page":"Understanding Results","title":"1. High-Confidence Detection","text":"# Raw prediction and final output are the same\n# High confidence score (>0.9)\n# Overwrite reason is NONE","category":"section"},{"location":"understanding_results/#2.-Low-Confidence-Text-File","page":"Understanding Results","title":"2. Low-Confidence Text File","text":"# Raw prediction might be \"python\" but final output is \"txt\"\n# Confidence score is medium (0.6-0.8)\n# Overwrite reason is LOW_CONFIDENCE","category":"section"},{"location":"understanding_results/#3.-Low-Confidence-Binary-File","page":"Understanding Results","title":"3. Low-Confidence Binary File","text":"# Raw prediction might be \"pebin\" but final output is \"unknown\"\n# Confidence score is low (<0.6)\n# Overwrite reason is LOW_CONFIDENCE","category":"section"},{"location":"understanding_results/#4.-Mapping-Override","page":"Understanding Results","title":"4. Mapping Override","text":"# Raw prediction might be \"windows_dll\" but final output is \"dll\"\n# Overwrite reason is OVERWRITE_MAP\n# This happens due to predefined content type mappings\n\nUnderstanding these patterns helps you make informed decisions about how to handle different file types in your applications while maintaining appropriate security postures.","category":"section"}]
}
